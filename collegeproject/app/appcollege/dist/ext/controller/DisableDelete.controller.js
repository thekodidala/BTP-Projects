sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";return e.extend("appcollege.ext.controller.DisableDelete",{override:{onInit:async function(){debugger},routing:{onBeforeBinding:async function(){debugger;if(sap.ushell&&sap.ushell.Container){var e=sap.ushell.Container.getService("UserInfo");var t=e.getEmail();console.log(t);var n=this.base.getExtensionAPI().getModel();if(!n){console.error("Model is not available.");return}var o;if(typeof n.getServiceUrl==="function"){o=n.getServiceUrl();console.log("Service URL:",o)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:o+"/Department",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,n,o){t(new Error(n+": "+o))}})});const n=await new Promise((e,t)=>{jQuery.ajax({url:o+"/Permission",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,n,o){t(new Error(n+": "+o))}})});console.log("Department data:",e);console.log("Permission data:",n);const s=e.value;const i=n.value;debugger;if(i&&i.length>0){for(let e of i){if(e.userEmail===t){var r=e.user}}}debugger;const l=window.location.href;console.log("Current URL:",l);const a=new URL(l);const c=a.hash.substring(1);const u=/Department\(deptId='([^']*)'/.exec(c);const g=u?u[1]:null;debugger;if(r!=="admin"){if(g!==r){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(false)}else if(e.getId().includes("Edit")){e.setVisible(false)}})}else{this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(false)}else if(e.getId().includes("Edit")){e.setVisible(true)}})}}}catch(e){console.error("Error fetching data",e)}}else{console.log("UserInfo service not available.")}}}}})});
//# sourceMappingURL=DisableDelete.controller.js.map