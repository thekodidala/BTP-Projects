sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;return e.extend("clglecturer.ext.controller.DisableEdit",{override:{routing:{onBeforeBinding:async function(){debugger;var e;setTimeout(function(){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){var t=e.getText();console.log("Button ID: ",t);console.log("Button Text: ",e.getText());if(t.includes("Create")){e.setText("Send for Approval")}else if(t.includes("Save")){}})}.bind(this),500);debugger;var s=this.base.getExtensionAPI().getModel();if(!s){console.error("Model is not available.");return}var i=this.getView().getModel("ui");var n=i.oData.editMode;const l=window.location.href;console.log("Current URL:",l);const o=new URL(l);const a=o.hash.substring(1);const r=/College\(lectId='([^']*)',IsActiveEntity=(true|false)\)/.exec(a);const d=r?r[1]:null;const u=r?r[2]==="true":null;setTimeout(async function(){if(d&&u===true){let s="postattach";let i=this.getView().getModel().bindContext(`/${s}(...)`);i.setParameter("p",d);await i.execute();const n=i.getBoundContext();var e=n.getValue();console.log(e.value.status);if(e.value.status=="Approved"&&(t==="kodidala.vamshivardhan@peolsolutions.com"||t===undefined)){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(true)}else if(e.getId().includes("Edit")){e.setEnabled(true)}})}else{this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setEnabled(false);e.setVisible(false)}else if(e.getId().includes("Edit")){e.setEnabled(false);e.setVisible(false)}})}}}.bind(this),1e3);if(u===true){var c=this.base.getView().byId("clglecturer::CollegeObjectPage--fe::CustomSubSection::DocAttachment--uploadSet");c.setUploadButtonInvisible(true);c.setUploadEnabled(false);c.mBindingInfos.items.template.setEnabledRemove(false);c.mBindingInfos.items.template.setVisibleRemove(false);c.mBindingInfos.items.template.setEnabledEdit(false);c.mBindingInfos.items.template.setVisibleEdit(false)}else if(u===false){var c=this.base.getView().byId("clglecturer::CollegeObjectPage--fe::CustomSubSection::DocAttachment--uploadSet");c.setUploadButtonInvisible(false);c.setUploadEnabled(true);c.mBindingInfos.items.template.setEnabledRemove(true);c.mBindingInfos.items.template.setVisibleRemove(true);c.mBindingInfos.items.template.setEnabledEdit(true);c.mBindingInfos.items.template.setVisibleEdit(true)}}},onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel();var s=this.base.getView().byId("clglecturer::CollegeObjectPage--fe::StandardAction::Edit");var i=this.base.getView().byId("clglecturer::CollegeObjectPage--fe::StandardAction::Delete");if(sap.ushell&&sap.ushell.Container){var n=sap.ushell.Container.getService("UserInfo");t=n.getEmail();console.log(t);if(s&&t!=="kodidala.vamshivardhan@peolsolutions.com"){s.setVisible(false);s.setEnabled(false)}if(i&&t!=="kodidala.vamshivardhan@peolsolutions.com"){i.setVisible(false)}}else{console.log("UserInfo service not available.")}}}})});
//# sourceMappingURL=DisableEdit.controller.js.map